run_name: pile-subset
platform: r1z1
gpu_type: a100_80gb
gpu_num: 8
image: growlix/data-dedupe
command: |
  cd streaming

  git pull
  
  python scripts/subset_pile.py --streaming_remote s3://mosaicml-internal-dataset-the-pile/mds/2/ --streaming_local /tmp/streaming_datasets/pile/ --split train --save_dir /tmp/subsets/pile/wikipedia --subsets wikipedia
  
  aws s3 cp /tmp/subsets/pile/ s3://mosaicml-internal-checkpoints-shared/matthew/ --recursive